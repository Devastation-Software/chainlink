{"version":3,"sources":["../src/Util/Util.ts"],"names":[],"mappings":"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","file":"Util.js","sourcesContent":["// Copyright (c) 2017-2018 dirigeants. All rights reserved. MIT license.\n\nimport { Constructable } from 'discord.js';\nimport { promisify } from 'util';\nimport { ShardingManager, BaseCluster } from '..';\n\nexport const PRIMITIVE_TYPES = ['string', 'bigint', 'number', 'boolean'];\n\nexport function chunk<T>(entries: T[], chunkSize: number) {\n\tconst result = [];\n\tconst amount = Math.floor(entries.length / chunkSize);\n\tconst mod = entries.length % chunkSize;\n\n\tfor (let i = 0; i < chunkSize; i++) {\n\t\tresult[i] = entries.splice(0, i < mod ? amount + 1 : amount);\n\t}\n\n\treturn result;\n}\n\nexport function deepClone(source: any): any {\n\t// Check if it's a primitive (with exception of function and null, which is typeof object)\n\tif (source === null || isPrimitive(source)) return source;\n\tif (Array.isArray(source)) {\n\t\tconst output = [];\n\t\tfor (const value of source) output.push(deepClone(value));\n\t\treturn output;\n\t}\n\tif (isObject(source)) {\n\t\tconst output: Record<string, any> = {};\n\t\tfor (const [key, value] of Object.entries(source)) output[key] = deepClone(value);\n\t\treturn output;\n\t}\n\tif (source instanceof Map) {\n\t\tconst output = new (source.constructor() as Constructable<Map<any, any>>)();\n\t\tfor (const [key, value] of source.entries()) output.set(key, deepClone(value));\n\t\treturn output;\n\t}\n\tif (source instanceof Set) {\n\t\tconst output = new (source.constructor() as Constructable<Set<any>>)();\n\t\tfor (const value of source.values()) output.add(deepClone(value));\n\t\treturn output;\n\t}\n\treturn source;\n}\n\nexport function isPrimitive(value: any): value is string | bigint | number | boolean {\n\treturn PRIMITIVE_TYPES.includes(typeof value);\n}\n\nexport function mergeDefault<T>(def: Record<string, any>, given?: Record<string, any>): T {\n\tif (!given) return deepClone(def);\n\tfor (const key in def) {\n\t\tif (given[key] === undefined) given[key] = deepClone(def[key]);\n\t\telse if (isObject(given[key])) given[key] = mergeDefault(def[key], given[key]);\n\t}\n\n\treturn given as any;\n}\n\nexport function isObject(input: any) {\n\treturn input && input.constructor === Object;\n}\n\nexport function sleep(duration: number) {\n\treturn promisify(setTimeout)(duration);\n}\n\nexport function calcShards(shards: number, guildsPerShard: number): number {\n\treturn Math.ceil(shards * (1000 / guildsPerShard));\n}\n\nexport async function startCluster(manager: ShardingManager) {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tconst ClusterClassRequire = await import(manager.path);\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tconst ClusterClass = ClusterClassRequire.default ? ClusterClassRequire.default : ClusterClassRequire;\n\tconst cluster = new ClusterClass(manager) as BaseCluster;\n\treturn cluster.init();\n}\n"],"sourceRoot":"../../src"}